var reader;var progress=document.querySelector(".percent");function handleFileSelect(evt){evt.stopPropagation();evt.preventDefault();document.getElementById("progress_bar").style.visibility="visible";document.getElementById("cancel_button").style.visibility="visible";var files=evt.dataTransfer.files;dropedFile=files[0];if(dropedFile===null||typeof dropedFile==="undefined"){document.getElementById("cancel_button").style.visibility="hidden";document.getElementById("progress_bar").style.visibility="hidden";return}setTimeout((function(){document.getElementById("txtIn").value="file :"+dropedFile.name.toString()+", size: "+dropedFile.size.toString()+" bytes";progress.style.visibility="visible"}),0);progress.style.width="0%";progress.textContent="0%";reader=new FileReader;reader.onerror=errorHandler;reader.onprogress=updateProgress;reader.onabort=function(e){alert("File read cancelled");document.getElementById("cancel_button").style.visibility="hidden";document.getElementById("progress_bar").style.visibility="hidden"};reader.onloadstart=function(e){document.getElementById("progress_bar").className="loading"};reader.onload=function(e){progress.style.width="100%";progress.textContent="100%";setTimeout("document.getElementById('progress_bar').className='';",500);document.getElementById("cancel_button").style.visibility="hidden";document.getElementById("progress_bar").style.visibility="hidden";setDataSourceToFile(false)};reader.readAsBinaryString(evt.dataTransfer.files[0])}function abortRead(){reader.abort()}function errorHandler(evt){switch(evt.target.error.name){case"NOT_FOUND_ERR":alert("File Not Found!");break;case"NOT_READABLE_ERR":alert("File is not readable");break;case"ABORT_ERR":break;default:alert("An error occurred reading this file.")}document.getElementById("cancel_button").style.visibility="hidden";document.getElementById("progress_bar").style.visibility="hidden"}function updateProgress(evt){if(evt.lengthComputable){var percentLoaded=Math.round(evt.loaded/evt.total*100);if(percentLoaded<100){progress.style.width=percentLoaded+"%";progress.textContent=percentLoaded+"%"}}}function handleDragOver(evt){evt.stopPropagation();evt.preventDefault();evt.dataTransfer.dropEffect="copy"}document.addEventListener("dragover",handleDragOver,false);document.addEventListener("drop",handleFileSelect,false);