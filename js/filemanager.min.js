var reader,progress=document.querySelector(".percent");function handleFileSelect(e){e.stopPropagation(),e.preventDefault(),document.getElementById("progress_bar").style.visibility="visible",document.getElementById("cancel_button").style.visibility="visible";var t=e.dataTransfer.files;if(dropedFile=t[0],null===dropedFile||"undefined"==typeof dropedFile)return document.getElementById("cancel_button").style.visibility="hidden",void(document.getElementById("progress_bar").style.visibility="hidden");setTimeout((function(){document.getElementById("txtIn").value="file :"+dropedFile.name.toString()+", size: "+dropedFile.size.toString()+" bytes",progress.style.visibility="visible"}),0),progress.style.width="0%",progress.textContent="0%",(reader=new FileReader).onerror=errorHandler,reader.onprogress=updateProgress,reader.onabort=function(e){alert("File read cancelled"),document.getElementById("cancel_button").style.visibility="hidden",document.getElementById("progress_bar").style.visibility="hidden"},reader.onloadstart=function(e){document.getElementById("progress_bar").className="loading"},reader.onload=function(e){progress.style.width="100%",progress.textContent="100%",setTimeout("document.getElementById('progress_bar').className='';",500),document.getElementById("cancel_button").style.visibility="hidden",document.getElementById("progress_bar").style.visibility="hidden",setDataSourceToFile(!1)},reader.readAsBinaryString(e.dataTransfer.files[0])}function abortRead(){reader.abort()}function errorHandler(e){switch(e.target.error.name){case"NOT_FOUND_ERR":alert("File Not Found!");break;case"NOT_READABLE_ERR":alert("File is not readable");break;case"ABORT_ERR":break;default:alert("An error occurred reading this file.")}document.getElementById("cancel_button").style.visibility="hidden",document.getElementById("progress_bar").style.visibility="hidden"}function updateProgress(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);t<100&&(progress.style.width=t+"%",progress.textContent=t+"%")}}function handleDragOver(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}document.addEventListener("dragover",handleDragOver,!1),document.addEventListener("drop",handleFileSelect,!1);