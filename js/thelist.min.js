var rstr2utf8=function(input){var output="";for(var n=0;n<input.length;n++){var c=input.charCodeAt(n);if(c<128){output+=String.fromCharCode(c)}else if(c>127&&c<2048){output+=String.fromCharCode(c>>6|192);output+=String.fromCharCode(c&63|128)}else{output+=String.fromCharCode(c>>12|224);output+=String.fromCharCode(c>>6&63|128);output+=String.fromCharCode(c&63|128)}}return output};var utf82rstr=function(input){var output="";var i=0;var c=0;var c2=0;var c3=0;while(i<input.length){c=input.charCodeAt(i);if(c<128){output+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=input.charCodeAt(i+1);output+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=input.charCodeAt(i+1);c3=input.charCodeAt(i+2);output+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return output};var HEX_DIGITS=2;var strlpad=function(str,pad,len){while(str.length<len){str=pad+str}return str};var str2hex=function(str){var output="";for(var i=0;i<str.length;i++){output+=strlpad(str.charCodeAt(i).toString(16),"0",HEX_DIGITS)}return output};var strpart=function(str,n){if(n>0){return str.match(new RegExp(".{1,"+n+"}","g"))}else if(n<0){var an=Math.abs(n);var t1=Math.ceil(str.length/an)*an-str.length;var t2="";for(var i=0;i<t1;i++){t2+="_"}t2+=str;t2=t2.match(new RegExp(".{1,"+an+"}","g"));t2[0]=t2[0].substr(t1,an-t1);return t2}};var hex2str=function(hex){var s=strpart(hex,HEX_DIGITS);var output="";for(var i=0;i<s.length;i++){output+=String.fromCharCode(parseInt(s[i],16))}return output};function add(x,y,base){var z=[];var k=0;var n=Math.max(x.length,y.length);if(x.length<y.length){for(k=x.length;k<n;k++){x.push(0)}}if(y.length<x.length){for(k=y.length;k<n;k++){y.push(0)}}var carry=0;var i=0;while(i<n){var zi=carry+x[i]+y[i];z.push(zi%base);carry=Math.floor(zi/base);i++}if(carry){z.push(carry%base)}return z}function multiplyByNumber(num,arrayx,base){if(num<0){return null}if(num===0){return[]}var result=[];var power=arrayx;while(true){if(num&1){result=add(result,power,base)}num=num>>1;if(num===0){break}power=add(power,power,base)}return result}var enableMemoizing=true;function parseToDigitsArray(str,base){var digits=str.split("");var ary=[];for(var i=digits.length-1;i>=0;i--){var n=parseInt(digits[i],base);if(isNaN(n)){return null}ary.push(n)}return ary}String.prototype.escapeHTML=function(){return this.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\n\r/g,"<br/>").replace(/\n/g,"<br>").replace(/'/g,"&#039;").replace(/\//g,"&#x2F;").replace(/"/g,"&quot;")};String.prototype.unescapeHTML=function(){return this.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/<br\s*[\/]?>/gi,"\n").replace(/&#039;/g,"'").replace(/&#x2F;/g,"/").replace(/&quot;/g,'"')};function convertBase(str,fromBase,toBase){var digitsFromBaseInNumbers=parseToDigitsArray(str,fromBase);if(digitsFromBaseInNumbers===null){return null}var theSum=[];var power=[1];var i=0;var horner=true;if(!horner||fromBase===2||toBase===2){for(i=0;i<digitsFromBaseInNumbers.length;i++){if(digitsFromBaseInNumbers[i]){theSum=add(theSum,multiplyByNumber(digitsFromBaseInNumbers[i],power,toBase),toBase)}power=multiplyByNumber(fromBase,power,toBase)}}else{theSum=[0];var an,theProduct,x;x=fromBase;for(i=digitsFromBaseInNumbers.length-1;i>=0;i--){an=multiplyByNumber(digitsFromBaseInNumbers[i],Array.apply(null,new Array(digitsFromBaseInNumbers[i].length)).map(Number.prototype.valueOf,1),fromBase);theProduct=multiplyByNumber(x,theSum,toBase);theSum=add(theProduct,an,toBase)}}var out="";for(i=theSum.length-1;i>=0;i--){out+=theSum[i].toString(toBase)}return out}function hexToBin(hexStr){var bin=convertBase(hexStr,16,2);if(bin.length%2===0){return bin}return"0"+bin}function binToHex(binStr){var hex=convertBase(binStr,2,16);if(hex.length%2===0){return hex}return"0"+hex}function decToHex(decStr){var hex=convertBase(decStr,10,16);if(hex.length%2===0){return hex}return"0"+hex}function hexToDec(hexStr){return convertBase(hexStr,16,10)}var A_SYMBOL="";var NATURAL="&#8469;";var getChoosenSystem=function(){var choice=document.getElementById("numbersystem");var choosen=choice.value;return choosen};function css(selector,property,value){for(var i=0;i<document.styleSheets.length;i++){try{document.styleSheets[i].insertRule(selector+" {"+property+":"+value+"}",document.styleSheets[i].cssRules.length)}catch(err){try{document.styleSheets[i].addRule(selector,property+":"+value)}catch(err){}}}}function normalizeCSS(){var choosen=getChoosenSystem();if(choosen==="dec"){css("#result","background","rgba(255, 255, 255,.8)");document.getElementById("txtIn").style.background="rgba(255, 255, 255,.85)"}else if(choosen==="hex"){css("#result","background","rgba(200, 255, 200,.8)");document.getElementById("txtIn").style.background="rgba(200, 255, 200,.85)"}else if(choosen==="bin"){css("#result","background","rgba(200, 200, 255,.8)");document.getElementById("txtIn").style.background="rgba(200, 200, 255,.85)"}css("body","color","black")}var syscloud=function(){normalizeCSS();return""};var errstyle=function(txt){return'<p class="err msg">'+A_SYMBOL+" "+txt+"</p>"};var systyle=function(txt){return'<p class="sys msg">'+A_SYMBOL+" "+txt+" </p>"};var MAX_SIZE_LIST=8e3;var MAX_SIZE_LISTINV=15e3;var effect=function(input){if(input==="The Matrix"){css("body","background","black");css("body","color","green");css("#text","background","black");return true}return false};var setVisible=function(obj,tf){var strVisi=tf?"visible":"hidden";if(obj!==null){obj.style.visibility=strVisi}};var setDisplay=function(obj,tf){var strDisplay=tf?"block":"none";obj.style.display=strDisplay};var setDisplayParse=function(tf){setDisplayActionsRecuadro(tf);var parseBox=document.getElementById("parseEnable");var parseText=document.getElementById("parseEnableTxt");var tdParseButton=document.getElementById("tdParseButton");if(parseBox!==null&&parseText!==null){setDisplay(parseBox,tf);setDisplay(parseText,tf);setDisplay(tdParseButton,tf)}};var setDisplayDownload=function(tf){setDisplayActionsRecuadro(tf);var downloadButton=document.getElementById("saveButton");if(downloadButton!==null){setDisplay(downloadButton,tf);if(document.getElementById("chooseButton").checked===true){downloadButton.className="myButton number"}else{downloadButton.className="myButton data"}}setDisplayShare(tf)};var setDisplayActionsRecuadro=function(tf){var buttonCont=document.getElementById("actions");setDisplay(buttonCont,tf)};var setDisplayButtons=function(tf){setDisplayParse(tf);setDisplayDownload(tf)};var setVisibleButtons=function(tf){var parseBox=document.getElementById("parseEnable");var parseText=document.getElementById("parseEnableTxt");var tdParseButton=document.getElementById("tdParseButton");setVisible(parseBox,tf);setVisible(parseText,tf);setVisible(tdParseButton,tf);var downloadButton=document.getElementById("saveButton");setVisible(downloadButton,tf);var shareDiv=document.getElementById("sharediv");setVisible(shareDiv,tf)};function setDisplayShare(tf){if(tf){var alink=document.createElement("a");alink.href="#";alink.innerHTML="";alink.setAttribute("style","text-decoration:none;");document.getElementById("sharediv").innerHTML="";document.getElementById("sharediv").appendChild(alink);setDisplay(document.getElementById("sharediv"),true)}else{var shareDiv=document.getElementById("sharediv");setDisplay(shareDiv,false);shareDiv.innerHTML="";shareDiv.style.display="none"}}var theListInverse=function(input){var e=document.getElementById("numbersystem");var hexString,utf8String;var choosen="dec";if(e!==null&&e!=="null"){choosen=e.value}if(choosen==="hex"){hexString=input}else if(choosen==="bin"){hexString=binToHex(input)}else{hexString=decToHex(input)}utf8String=hex2str(hexString);var result=utf82rstr(utf8String);return result};var theList=function(input){var utf8String=rstr2utf8(input);var hexString=str2hex(utf8String);var result;var e=document.getElementById("numbersystem");var choosen="dec";if(e!==null&&e!=="null"){choosen=e.value}if(choosen==="hex"){result=hexString}else if(choosen==="bin"){result=hexToBin(hexString)}else{result=hexToDec(hexString)}return result};function memoizeList(param){if(enableMemoizing){if(!memoizeList.cache){memoizeList.cache={}}if(!memoizeList.cache[param]){memoizeList.cache[param]=theList(param)}return memoizeList.cache[param]}else{return theList(param)}}function memoizeListInv(param){if(enableMemoizing){if(!memoizeListInv.cache){memoizeListInv.cache={}}if(!memoizeListInv.cache[param]){var result=theListInverse(param);memoizeListInv.cache[param]=result}return memoizeListInv.cache[param]}else{return theListInverse(param)}}var MSG_FOR_FILE_SOURCE="Search file content";var MSG_FOR_KEYBOARD_SOURCE="Search what you type..or drop a file!";var fileMode;var getDataSource=function(){return document.getElementById("txtIn").value};var setDataSourceToKeyboard=function(force){if(fileMode||force){fileMode=false;document.getElementById("txtIn").title=MSG_FOR_KEYBOARD_SOURCE;document.getElementById("txtIn").focus();window.getDataSource=function(){return document.getElementById("txtIn").value};setVisible(progress,false)}};var escondeDuende=function(){duendeActual.style.display="none";document.getElementById("duendecontainer").style.display="none"};var muestraDuende=function(){duendeActual.style.display="block";document.getElementById("duendecontainer").style.display="block"};function encode_utf8(s){return unescape(encodeURIComponent(s))}function decode_utf8(s){return decodeURIComponent(escape(s))}function atobNew(s){return atob(s)}function btoaNew(s){return btoa(s)}var setDataSourceToFile=function(force){if(!fileMode||force){fileMode=true;document.getElementById("txtIn").title=MSG_FOR_FILE_SOURCE;document.getElementById("txtIn").style.background="#5F9EA0";document.getElementById("result").innerHTML="";window.getDataSource=function(){return utf82rstr(btoaNew(reader.result))};muestraDuende()}};var clearIn=function(){markTextInAsModificado();setDataSourceToKeyboard(false)};function isEmpty(str){return!str||str.length===0}var getFileFoundMessage=function(res){if(pareceBase64(res)){try{var decoded=atobNew(res);var ext=guessExtension(decoded);if(!isEmpty(ext)){var tipo=getTypeFromExt(ext);return systyle("..it seems you found "+tipo+" file.")}}catch(e){return""}}return""};var MAX_SEARCH_LEN_DATA_TO_NUMBER=500;var MAX_SEARCH_LEN_NUMBER_TO_DATA=1e3;var showFileFoundMessage=function(){var len=document.getElementById("txtIn").value.length;var data2number=document.getElementById("chooseButton").checked;if(len<=MAX_SEARCH_LEN_DATA_TO_NUMBER&&data2number||len<=MAX_SEARCH_LEN_NUMBER_TO_DATA&&!data2number){document.getElementById("erms").innerHTML=getFileFoundMessage(document.getElementById("result").innerHTML)}};var lista=function(input,searchWhileType,atEnds){if(arguments.length===2){atEnds=function(){showFileFoundMessage()}}var result="";setTimeout((function(){try{if(input!==null){var len=input.length;if(input.length!==0){var confirmSearch=true;var choosen=getChoosenSystem();if(len>MAX_SIZE_LIST&&choosen!=="hex"){confirmSearch=window.confirm("BIG Search in other than Hex will be VERY slow, "+len+" bytes, sure? are you ok?")}if(confirmSearch){setDisplayButtons(false);result=memoizeList(input);if(searchWhileType){setDisplayButtons(true)}document.getElementById("result").innerHTML=result;return result}}}setDisplayButtons(false);document.getElementById("result").innerHTML=syscloud()}catch(e){result="System error.["+e+"]";document.getElementById("erms").innerHTML=errstyle(result);document.getElementById("result").innerHTML=""}finally{atEnds();return result}}),0);return result};var calcuLen=function(innerH){var larr=innerH.split(" ");var len=0;for(var i in larr){len+=larr[i].length}return len};var resultIsCopiable=function(){var containTag=document.getElementById("result").innerHTML.indexOf("<html>")!==-1;return!containTag};function customAlert(msg,duration){var styler=document.createElement("div");styler.setAttribute("style","border: solid 3px Green; text-align:center; width:auto;height:4em;background-color:#DEF;color:Gray; font-family:consolas;");styler.innerHTML="<h4>"+msg+"</h4>";setTimeout((function(){styler.parentNode.removeChild(styler)}),duration);document.body.appendChild(styler)}var copyToTxtIn=function(){if(document.getElementById("chooseButton").checked!==true){var exResultNumeric=document.getElementById("result").innerHTML.unescapeHTML();exResultNumeric=getOnlyNumbers(exResultNumeric,getChoosenSystem());document.getElementById("txtIn").value=exResultNumeric}else{if(resultIsCopiable()){document.getElementById("txtIn").value=document.getElementById("result").innerHTML.unescapeHTML()}else{clearIn()}}};var getOnlyNumbers=function(strIn,choosenNumberSystem){var str=strIn;var pattern=/(\r\n|\n|\r)/gm;str.replace(pattern,"");if(choosenNumberSystem==="dec"){pattern=/\D/g}else if(choosenNumberSystem==="hex"){pattern=/(?![0-9a-fA-F])./g}else if(choosenNumberSystem==="bin"){pattern=/(?![0-1])./g}return str.replace(pattern,"")};var clickTheChoosen=function(){if(document.getElementById("chooseButton").checked===true){if(getDataSource()===""){return"false"}return"lista"}else{var choosenSystem=getChoosenSystem();var deletedIn=getOnlyNumbers(document.getElementById("txtIn").value,choosenSystem);var rawIn=document.getElementById("txtIn").value;if(rawIn.length!==deletedIn.length){var confirmDelete=true;if(confirmDelete){document.getElementById("txtIn").value=deletedIn}else{return"false"}}if(getDataSource()===""){return"false"}return"listaInv"}};var guessFileType=function(fileContent){var filetypes={"FF D8 FF":['<img src="data:image/jpg;base64,','"/>',".jpg"],"89 50 4E 47 0D 0A 1A 0A":['<img src="data:image/png;base64,','"/>',".png"],"47 49 46 38":['<img src="data:image/gif;base64,','"/>',".gif"],"49 20 49":['<img src="data:image/tiff;base64,','"/>',".tif"],"49 44 33":['<audio controls="controls" autobuffer="autobuffer"><source src="data:audio/mpeg;base64,','"/>',".mpg"],"4F 67 67 53":['<audio controls="controls" autobuffer="autobuffer"><source src="data:audio/ogg;base64,','"/>',".ogg"],"52 49 46 46":['<audio controls="controls" autobuffer="autobuffer"><source src="data:audio/wav;base64,','"/>',".wav"],"FF F3":['<audio controls="controls" autobuffer="autobuffer"><source src="data:audio/mp3;base64,','"/>',".mp3"],"66 74 79 70":['<video controls><source type="video/mp4" src="data:video/mp4;base64,','"></video>',".mp4"],"00 00 00 1c 66 74 79 70":['<video controls><source type="video/mp4" src="data:video/mp4;base64,','"></video>',".mp4"],"25 50 44 46":['<embed src="data:application/pdf;base64,','">',".pdf"],"4D 5A":['<embed src="data:application/octet-stream;base64,','">',".exe"],"50 4B":['<embed src="data:application/x-compressed;base64,','">',".zip"],"50 4B 03 04 14":['<embed src="data:application/java-archive;base64,','">',".jar"],"52 61 72 21 1A 07":['<embed src="data:application/x-rar-compressed','">',".rar"]};for(var prop in filetypes){if(filetypes.hasOwnProperty(prop)){var hexToScan=prop.split(" ");if(fileContent.length>=hexToScan.length){var found=0;var i=0;for(i=0;i<hexToScan.length;i++){var m2=fileContent.charCodeAt(i);if(m2===parseInt(hexToScan[i],16)){found++}else{break}}if(found===hexToScan.length){return filetypes[prop]}}}}return null};var getTypeFromExt=function(ext){switch(ext){case".jpg":case".gif":case".png":case".tif":return"an image";break;case".mp4":return"a movie";break;case".mpg":case".ogg":case".wav":case".mp3":return"a sound";break;case".pdf":return"a pdf";break;case".exe":return"an executable";break;case".rar":case".zip":return"a compressed";break;case".jar":return"a java";break;default:return"a"}};var guessExtension=function(decoded){var prepost=guessFileType(decoded);if(prepost!==null){return prepost[2]}return""};var guessParsing=function(data){var prepost=null;try{var decoded=atobNew(utf82rstr(data));prepost=guessFileType(decoded)}catch(e){}if(prepost!==null){return prepost[0]+utf82rstr(data)+prepost[1]}else{try{return utf82rstr(atobNew(data)).escapeHTML()}catch(e){var dataHtml=utf82rstr(data);return dataHtml}}};var lastInput="";var listaInv=function(input,searchWhileType,atEnds){if(arguments.length===2){atEnds=function(){showFileFoundMessage()}}var reproceso=false;if(lastInput===input){reproceso=true}lastInput=input;var result="";setTimeout((function(){try{if(input!==null){var len=input.length;if(len!==0){var confirmSearch=true;var choosen=getChoosenSystem();if(len>MAX_SIZE_LISTINV&&choosen!=="hex"){confirmSearch=window.confirm("BIG Parse!! "+len+" bytes, sure? are you ok?")}if(confirmSearch){result=memoizeListInv(input);if(searchWhileType||reproceso){setDisplayButtons(true)}effect(result);if(document.getElementById("parseEnable").checked){document.getElementById("result").innerHTML=guessParsing(result);var scripts=document.getElementById("result").getElementsByTagName("script");if(scripts!==null){for(var i=0;i<scripts.length;i++){eval(scripts[i].text)}}}else{document.getElementById("result").innerHTML=result.escapeHTML()}return result}}}document.getElementById("result").innerHTML=syscloud()}catch(e){var choosen=getChoosenSystem();result=choosen+" numbers only.";console.log(result+":"+e);document.getElementById("erms").innerHTML=errstyle(result);document.getElementById("result").innerHTML="";setDisplayButtons(false)}finally{atEnds();return result}}),0);return result};var pareceBase64=function(dat){if(/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(dat)){return true}else{return false}};function guardaPlain(name,data){var blob=new Blob([data]);saveAs(blob,name)}function saveResult(){var data=document.getElementById("result").innerHTML;if(!document.getElementById("chooseButton").checked&&pareceBase64(data)){try{var byteString=atobNew(data);var ab=new ArrayBuffer(byteString.length);var ia=new Uint8Array(ab);for(var i=0;i<byteString.length;i++){ia[i]=byteString.charCodeAt(i)}blob=new Blob([ia]);saveAs(blob,"listFile"+guessExtension(byteString))}catch(e){guardaPlain("listItem.html",data)}}else{guardaPlain("listIndex.html",data)}}function getURLParameter(name){return decodeURI((RegExp(name+"="+"(.+?)(&|$)").exec(location.search)||[,null])[1])}function fireFromURL(){var id=getURLParameter("id");var dl=getURLParameter("dl");var guess=getURLParameter("guess");var sys=getURLParameter("sys");var light=getURLParameter("light");if(id!==null&&id!=="null"&&id!==undefined){document.getElementById("chooseButton").checked=true;document.getElementById("txtIn").value=id;if(guess!==null&&guess!=="null"&&guess!==undefined){if(guess==="true"){document.getElementById("parseEnable").checked=true}else{document.getElementById("parseEnable").checked=false}}if(sys!==null&&sys!=="null"&&sys!==undefined){document.getElementById("numbersystem").value=sys}if(light!==null&&light!=="null"&&light!==undefined&&light==="off"){css("body","background","black");css("body","color","black")}else{normalizeCSS()}document.getElementById("chooseButton").checked=false;escondeDuende();if(dl!==null&&dl!=="null"&&dl!==undefined&&dl==="true"){listaInv(id,true,saveResult)}else{listaInv(id,true)}}}
